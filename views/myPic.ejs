<%- include('layout') %>

<div class="container">
  <h1>My Pictures</h1>

  <% if (images && images.length > 0) { %>
    <div class="row">
      <% images.forEach(image => { %>
        <div class="col s12 m6 l4">
          <div class="card">
            <div class="card-image">
              <img src="<%= image.url %>" alt="<%= image.description %>">
            </div>
            <div class="card-content">
              <p>
                <%= image.description %>
              </p>
              <div class="stars-container">
                <i class="material-icons">star</i> <%= image.stars %>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <p>You have not uploaded any pictures yet.</p>
  <% } %>

  <a href="/add-a-pic" class="waves-effect waves-light btn">Add a Picture</a>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.pkgd.min.js"></script>
<!-- <script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script> -->
<script>
  $('img').on('error', function () {
    $(this).attr('src', 'No-Image-Placeholder.png'); // Replace with placeholder image on error
  });
</script>
